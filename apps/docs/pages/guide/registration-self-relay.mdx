# Self-Relay Registration

Register a stolen wallet by signing with the compromised wallet and paying with a different wallet.

## When to Use

Use Self-Relay Registration when:

- Your compromised wallet is drained (no ETH for gas)
- You have another wallet with funds
- You don't have a trusted helper for P2P relay

## Prerequisites

- Web3 wallet connected
- Compromised wallet address (for signing)
- A second wallet with ~$5 in ETH for gas + fee

## How It Works

1. **Sign** with your compromised wallet (proves ownership)
2. **Switch** to your funded wallet
3. **Pay** with your funded wallet (covers gas + fee)

The signature proves you own the compromised wallet, while the payment comes from a different address.

## Step-by-Step Guide

### Step 1: Connect Your Compromised Wallet

1. Navigate to the [registration app](https://app.stolenwallet.registry)
2. Select "Self-Relay" registration method
3. Connect your **compromised** wallet (the one to register)

### Step 2: Enter Details

1. The compromised wallet address auto-fills as "Registeree"
2. Enter your **funded wallet** address as "Relayer"
3. Review the registration fee

### Step 3: Sign Acknowledgement

1. Click "Sign Acknowledgement"
2. Sign the EIP-712 message with your **compromised wallet**
3. The message includes:
   - `owner`: Compromised wallet address
   - `forwarder`: Funded wallet address
   - `nonce` and `deadline`

### Step 4: Switch Wallets

1. After signing, you'll be prompted to switch wallets
2. Disconnect your compromised wallet
3. Connect your **funded wallet** (the relayer address)

### Step 5: Submit Acknowledgement Transaction

1. Verify you're now connected with your funded wallet
2. Click "Submit Acknowledgement"
3. The transaction uses the signature from your compromised wallet
4. Pay the gas with your funded wallet

### Step 6: Wait for Grace Period

1. The 1-4 minute grace period begins
2. Progress is saved - you can close the browser
3. Return before the registration window expires

### Step 7: Switch Back and Sign Registration

1. When prompted, switch back to your **compromised wallet**
2. Sign the registration EIP-712 message
3. This proves you still control the compromised wallet

### Step 8: Switch and Submit Registration

1. Switch back to your **funded wallet**
2. Click "Submit Registration"
3. Pay the final transaction
4. **Done!** Wallet is registered as stolen

## Flow Diagram

```
┌──────────────────────────────────────────────────────────────┐
│                     COMPROMISED WALLET                        │
│  ┌─────────────────────┐      ┌─────────────────────┐        │
│  │ Sign Acknowledgement│      │ Sign Registration   │        │
│  └──────────┬──────────┘      └──────────┬──────────┘        │
└─────────────┼────────────────────────────┼───────────────────┘
              │                            │
              ▼                            ▼
┌──────────────────────────────────────────────────────────────┐
│                       FUNDED WALLET                           │
│  ┌─────────────────────┐      ┌─────────────────────┐        │
│  │ Pay Acknowledgement │      │ Pay Registration    │        │
│  └──────────┬──────────┘      └──────────┬──────────┘        │
└─────────────┼────────────────────────────┼───────────────────┘
              │                            │
              ▼                            ▼
       Grace Period                    Success!
       (1-4 minutes)
```

## Wallet Switching Tips

### Using MetaMask

1. Click the account icon in MetaMask
2. Select a different account
3. Or click "Add account" to import another wallet

### Using Multiple Wallets

If your wallets are in different providers (e.g., MetaMask + Rainbow):

1. Disconnect the current wallet in the app
2. Connect with the other wallet provider
3. The app will remember your progress

### Hardware Wallets

Works the same way - just connect/disconnect your hardware wallet at the appropriate steps.

## Troubleshooting

### "Invalid Forwarder" Error

The connected wallet doesn't match the relayer address you entered. Make sure you:

- Entered the correct relayer address in step 2
- Connected the correct wallet for payment

### Lost Signature

If you refresh or the app loses your signature:

- Check sessionStorage in browser dev tools
- Signatures are stored for 30 minutes
- If lost, you'll need to sign again

### Can't Switch Wallets

Some browsers restrict wallet switching. Try:

- Disconnecting in the wallet extension first
- Clearing browser cache
- Using a different browser

## Next Steps

- [Standard Registration](/guide/registration-standard) - Simpler if you have funds
- [P2P Relay Registration](/guide/registration-p2p-relay) - If you need a helper
- [Etherscan Walkthrough](/guide/etherscan-walkthrough) - Manual registration
